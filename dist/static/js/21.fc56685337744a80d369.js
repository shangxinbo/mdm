webpackJsonp([21],{370:function(t,e,s){var a=s(133)(s(667),s(778),null,null,null);t.exports=a.exports},382:function(t,e,s){"use strict";e.a={login:"/user/login",logout:"/user/logout",customer_info:"/customer/allinfo",customer_alarm:"/customer/balancealarm",update_pass:"/user/modifypwd",operate_list:"/operation/list",operate_addagent:"/operate/addagent",operate_getagent:"/operate/getagent",operate_upagent:"/operate/modifyagin",operate_pwdagent:"/operate/modifypwd",operate_expire_seat_list:"/operate/expireseat",operate_active_seat:"/seat/recharge",agent_list:"/operate/aginuserinfo",reset_operate_pass:"/operation/changePwd",create_operate:"/operation/add",get_operate_info:"/operation/modifyinfo",update_operate:"/operation/operationmodifyinfomessage",customer_list:"/agent/list",customer_list_all:"/customer/all",customer_list_by_operate:"/operate/list",customer_type_list:"/operate/usertype",customer_add:"/agent/add",customer_add_by_operate:"/operate/operateadduser",customer_modify:"/agent/modify",customer_detail:"/agent/agininfo",agent_my_info:"/agent/info",agent_modify_myinfo:"/agent/modifyself",customer_detail_by_operate:"/operate/agentinfo",customer_edit:"/agent/modifyinfo",customer_upself:"/customer/modify",customer_check:"/operate/examine",customer_renew_seat:"/customer/renewseatinfo",angent_list_all:"/operate/agent",add_seat:"/operate/seatmodify",recharge:"/operate/recharge",project_status:"/project/status",project_list:"/project/list",project_stop:"/project/pause",project_start:"/project/start",project_detail:"/project/detail",preject_audit:"/project/audit",project_recheck:"/project/againaudit",expense_project:"/operate/chargingproject",expense_project_user:"/operate/charginuser",expense_project_agent:"/operate/chargingagent",expense_seat:"/operate/chargingseat",expense_seat_count:"/operate/chargingseatcount",expense_seat_agent:"/operate/chargingagentseat",expense_balance_in:"/customer/recharge",expense_balance_out:"/customer/consume",customer_expense_project:"/customer/chargingproject",customer_seat:"/customer/chargingseat",customer_seat_count:"/customer/chargingseatcount",customer_my_seat_list:"/customer/seat",project_type_list:"/project/type",project_add:"/project/create",project_call_list:"/seat/outbound",project_call_nodial_list:"/seat/getClueDialNo",project_call_enddial_list:"/seat/getClueDialOk",project_call_modify:"/seat/modify",project_clue_info:"/seat/clueinfo",project_set_sms:"/project/start_gj_sms",project_get_nodial_clues:"/project/getNoDialClues",project_recovery_clues:"/project/recoverClues",seat_list:"/project/seatlist",seat_binding:"/project/binding",seat_status:"/seat/status",seat_tobind:"/project/bindingSeat",call_list:"/teltraffic/list",call_cate:"/teltraffic/category",call_head:"/teltraffic/heads",call_audio:"/teltraffic/proSeatList",call_phone_audio:"/teltraffic/proSeatPhoneList",call_audio_export:"/teltraffic/proSeatList_export",call_audio_phone_export:"/teltraffic/proSeatPhone_export",get_seat_sign:"/callCenter/getSignInData",save_call_uuid:"/callCenter/saveCallUuid",add_call_job:"/callCenter/addJob",doc_list:"/doc/list",doc_upload:"/doc/upload",doc_download:"/doc/download",get_myclient_balance:"/seat/balance",get_tel:"/seat/getseatphone",get_tel_prefix:"/callCenter/getPhonePrefix",filter_product_1:"/filtertag/products",filter_product_2:"/filtertag/product",filter_prefer_1:"/filtertag/preferences",filter_prefer_2:"/filtertag/preference",filter_area:"/filtertag/region",filter_customers:"/filtertag/selectnumber",filter_save:"/filtertag/save",get_login_status:"/user/status",change_price:"/operate/modifyprice",dial_pre:"/seat/changestatus",save_dial_history:"/callCenter/saveTelephoneRecord",no_sms_template_customer:"/sms/no_client_list",sms_record_list:"/sms/record_list",sms_record_export:"/sms/record_list_export",sms_template_list:"/sms/template_list",sms_template_add:"/sms/template_save",sms_template_detail:"/sms/template_find",sms_client_list:"/sms/client_select",sms_client_template_list:"/sms/template_select",sms_send:"/sms/record_save",seat_list_by_project:"/project/getSeatByProject",left_info_list:"/sms/capital_list",left_info_export:"/sms/capital_list_export",clue_attribution:"/clue/getAttribution",clue_get_result:"/clue/getDialResults",clue_get_sub_result:"/clue/getDialSubresults",clue_get_record:"/seat/getPhoneRecord",clue_get_next1:"/seat/getNextClueDialNo",clue_get_next2:"/seat/getNextClueDialOk"}},408:function(t,e,s){var a=s(133)(s(409),s(410),null,null,null);t.exports=a.exports},409:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(49);e.default={data:function(){return{selected:{id:"",name:""},list:[],show:!1}},props:["api","param","id","name","initlist","error","addClass","hideAll","disabled"],watch:{id:function(t,e){this.choose(t)},name:function(t,e){this.choose("",t)}},created:function(){this.init()},mounted:function(){var t=this;a.a.nextTick(function(){document.addEventListener("click",function(){t.show=!1})})},methods:{showSelect:function(){if(this.disabled)return!1;this.show?this.show=!1:this.show=!0},change:function(t){this.selected=t||{id:"",name:"全部"},this.$emit("change",this.selected),this.show=!1},choose:function(t,e){var s=this,a=!1;this.list.find(function(i,l){""!=t&&t==i.id&&(s.selected=i,a=!0),""!=e&&e==i.name&&(s.selected=i,a=!0)}),a||(this.hideAll?this.selected=this.list.length>0?this.list[0]:{id:"",name:""}:this.selected={id:"",name:"全部"})},init:function(t){var e=this;if(this.initlist)this.list=this.initlist,this.choose(this.id,this.name),t&&t();else if(this.api){var s=this.param?this.param:{};this.$ajax({url:this.api,data:s,success:function(s){var a=[],i=s.data;if(i instanceof Array)i.forEach(function(t,e){a.push({id:void 0==t.id?void 0==t.code?e+1:t.code:t.id,name:t.name||t.desc||t.user||t})});else for(var l in i)a.push({id:l,name:i[l]});a.sort(function(t,e){return parseInt(e.id)-parseInt(t.id)}),e.list=a,e.choose(e.id,e.name),t&&t()}})}}}}},410:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-warp"},[s("div",{staticClass:"select-warp",class:[{"select-open":t.show},t.addClass]},[s("p",{staticClass:"all",on:{click:function(e){e.stopPropagation(),t.showSelect(e)}}},[s("span",[t._v(t._s(t.selected.name))])]),t._v(" "),s("div",{staticClass:"select-ul"},[s("div",{staticClass:"scroll-warp scrollBar",staticStyle:{"overflow-y":"auto"}},[s("ul",[t.hideAll?t._e():s("li",{on:{click:function(e){e.stopPropagation(),t.change()}}},[t._v("全部")]),t._v(" "),t._l(t.list,function(e,a){return s("li",{on:{click:function(s){s.stopPropagation(),t.change(e)}}},[t._v(t._s(e.name))])})],2)])])]),t._v(" "),t.error?s("p",{staticClass:"error"},[t._v(t._s(t.error))]):t._e()])},staticRenderFns:[]}},597:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(382),i=s(408),l=s.n(i);e.default={data:function(){return{style:"none",id:"",name:"",seat:[],error:"",userType:JSON.parse(localStorage.getItem("user")).type,clue_num:0,assign_clue_num:"",assignTypeList:[{id:1,name:"平均分配"},{id:2,name:"自定义分配"}],assignType:1}},computed:{checkedAllStatus:function(){var t=!0;return this.seat.forEach(function(e){e.checked||(t=!1)}),t}},methods:{close:function(){this.style="none",this.$store.commit("HIDE_LAYER")},sure:function(){var t=this,e=[],s=/^[1-9][0-9]*$/;if(1==this.assignType){if(this.seat.forEach(function(t){t.checked&&e.push(t.key)}),e.length<=0)return!1;if(!s.test(this.assign_clue_num))return this.error="分配的线索数值需要是正整数",!1;if(this.assign_clue_num>this.clue_num)return this.error="分配线索不能大于剩余线索",!1;this.error=""}else{this.seat.forEach(function(t){t.checked&&e.push({id:t.key,num:t.num})});for(var i=0,l=0;l<e.length;l++){if(!s.test(e[l].num))return this.error="请保证每个坐席分配到的线索数值是正整数",!1;i+=parseInt(e[l].num)}if(e.length<=0)return!1;if(i>this.clue_num)return this.error="分配线索量之和大于未拨打线索量。分配线索量之和 "+i+"，未拨打线索量 "+this.clue_num,!1;this.error=""}this.$ajax({url:a.a.seat_tobind,data:{id:this.id,type:1==this.assignType?0:1,seat_id:{num:this.assign_clue_num,ids:e},seat_conf:e},success:function(e){200==e.code?(t.close(),t.$toast("操作成功",function(){window.location.reload()})):600==e.code?(t.close(),t.$toast("拨打资源数量在变动中,请刷新页面后，尝试重新分配")):t.error=e.message}})},toggleChecked:function(t){t.checked=!t.checked},toggleAll:function(){var t=this.checkedAllStatus;this.seat.forEach(function(e,s,a){e.checked=!t})},changeAssignType:function(t){this.assignType=t.id,2==t.id?this.seat.forEach(function(t,e,s){t.num=""}):this.assign_clue_num="",this.error=""}},created:function(){var t=this;if(3!=this.userType)return!1;this.$ajax({url:a.a.seat_list,success:function(e){if(200==e.code){var s=[];for(var a in e.data)s.push({key:a,val:e.data[a],checked:!1,num:""});t.seat=s}else t.seat=[]}}),this.$on("show",function(t,e,s){this.id=t,this.name=e,this.clue_num=s,this.assignType=1,this.assign_clue_num="",this.error="",this.style="block",this.$store.commit("SHOW_LAYER")})},components:{mselect:l.a}}},610:function(t,e,s){var a=s(133)(s(597),s(615),null,null,null);t.exports=a.exports},615:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"dialog",staticStyle:{"margin-left":"-259px","margin-top":"-181px"},style:{display:t.style}},[s("a",{staticClass:"icon dialog-close",attrs:{href:"javascript:void(0);",title:"关闭"},on:{click:t.close}}),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:"dialog-body"},[s("div",{staticClass:"dialog-allocation"},[s("ul",{staticClass:"mode"},[s("li",[s("label",[t._v("线索分配方式")]),t._v(" "),s("mselect",{attrs:{hideAll:!0,addClass:"seat-select",id:t.assignType,initlist:t.assignTypeList},on:{change:t.changeAssignType}})],1)]),t._v(" "),s("ul",{staticClass:"mode"},[s("li",[s("label",[t._v("未分配线索")]),t._v(" "),s("div",{staticClass:"input-warp"},[s("p",{staticClass:"text"},[t._v(" "+t._s(t.clue_num))])])]),t._v(" "),s("li",{directives:[{name:"show",rawName:"v-show",value:1==t.assignType,expression:"assignType==1"}]},[s("div",{staticClass:"select-cutover1"},[s("label",[t._v("本次分配线索")]),t._v(" "),s("div",{staticClass:"input-warp"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.assign_clue_num,expression:"assign_clue_num"}],staticClass:"text",staticStyle:{width:"120px","min-width":"120px"},attrs:{type:"text"},domProps:{value:t.assign_clue_num},on:{input:function(e){e.target.composing||(t.assign_clue_num=e.target.value)}}})])])])]),t._v(" "),s("div",{staticClass:"title"},[t._v(t._s(t.name)+"分配给以下坐席拨打")]),t._v(" "),s("div",{staticClass:"check-warp"},[s("div",{staticClass:"scroll-warp scrollBar",staticStyle:{"overflow-y":"auto"}},[s("ul",{staticClass:"scroll-content screening-item"},t._l(t.seat,function(e,a){return s("li",{class:{checked:e.checked}},[s("p",[s("i",{staticClass:"icon",on:{click:function(s){t.toggleChecked(e)}}}),t._v(" "),s("span",[t._v(t._s(e.val))])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:2==t.assignType,expression:"assignType==2"}],staticClass:"clue"},[s("span",[t._v("分配线索")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.num,expression:"item.num"}],staticClass:"text",attrs:{type:"text"},domProps:{value:e.num},on:{input:function(t){t.target.composing||(e.num=t.target.value)}}})])])}))])]),t._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:t.error,expression:"error"}],staticClass:"notice"},[s("i",{staticClass:"icon"}),t._v(t._s(t.error))]),t._v(" "),s("div",{staticClass:"dialog-select"},[s("div",{staticClass:"checkall",class:{checked:t.checkedAllStatus}},[s("i",{staticClass:"icon",on:{click:t.toggleAll}}),t._v(" "),s("span",[t._v("全选")])])])])]),t._v(" "),s("div",{staticClass:"dialog-footer"},[s("button",{staticClass:"btn blue",attrs:{type:"button"},on:{click:t.sure}},[t._v("确定")]),t._v(" "),s("button",{staticClass:"btn",attrs:{type:"button"},on:{click:t.close}},[t._v("取消")])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"dialog-header"},[s("h4",[t._v("分配线索")])])}]}},667:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(382),i=s(749),l=s.n(i),c=s(610),n=s.n(c);e.default={data:function(){return{userType:JSON.parse(localStorage.getItem("user")).type,detail:{id:"",audit_status:1,name:"",client_name:"",project_type:"",agency:"",region:"",expect_clue_num:"",expect_begin_date:"",desc:"",created_at:"",project_status:"",audit_reason:"",clue_num:"",clue_odd_num:"",clue_connect_num:"",clue_valid_percent:"",call_time:"",odd_time:"",project_seat_num:""}}},components:{refuseDialog:l.a,chooseSeatDialog:n.a},methods:{accept:function(t){var e=this;this.$confirm("确定要审核通过该项目？",function(){e.$ajax({url:a.a.preject_audit,data:{id:t,audit_result:-2},success:function(t){200==t.code?e.$toast("已完成审核",function(){e.$router.replace("/project/index")}):e.$toast(t.message)}})})},refuse:function(t){this.$refs.refuseDialog.$emit("show",t)},assignSeat:function(t,e){this.$refs.chooseSeatDialog.$emit("show",t,e)}},created:function(){var t=this,e=this.$route.params.id;this.$ajax({url:a.a.project_detail,data:{id:e},success:function(e){200==e.code?t.detail=e.data:t.$toast(e.message)}})}}},669:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(382);e.default={data:function(){return{style:"none",message:"",error:""}},methods:{close:function(){this.style="none",this.$store.commit("HIDE_LAYER")},sure:function(){var t=this;if(!this.message)return this.error="拒绝原因必填",!1;this.$ajax({url:a.a.preject_audit,data:{id:this.id,audit_result:-3,audit_reason:this.message},success:function(e){200==e.code?(t.close(),t.$toast("操作成功",function(){window.location.reload()})):t.$toast(e.message)}})}},created:function(){this.$on("show",function(t){this.id=t,this.message="",this.error="",this.style="block",this.$store.commit("SHOW_LAYER")})}}},749:function(t,e,s){var a=s(133)(s(669),s(774),null,null,null);t.exports=a.exports},774:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"dialog",staticStyle:{"margin-left":"-259px","margin-top":"-181px"},style:{display:t.style}},[s("a",{staticClass:"icon dialog-close",attrs:{href:"javascript:void(0);",title:"关闭"},on:{click:t.close}}),t._v(" "),s("div",{staticClass:"dialog-body"},[t._m(0),t._v(" "),s("div",{staticClass:"data-textarea"},[s("span",[t._v("拒绝原因")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}}),t._v(" "),t.error?s("p",{staticClass:"error"},[t._v(t._s(t.error))]):t._e()])]),t._v(" "),s("div",{staticClass:"dialog-footer"},[s("button",{staticClass:"btn blue",attrs:{type:"button"},on:{click:t.sure}},[t._v("确定")]),t._v(" "),s("button",{staticClass:"btn",attrs:{type:"button"},on:{click:t.close}},[t._v("取消")])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pop-default"},[s("p",[s("span",[t._v("确定要拒绝通过该项目？")])])])}]}},778:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"warp"},[s("div",{staticClass:"main"},[s("div",{staticClass:"title-warp"},[t._v(t._s(t.detail.name))]),t._v(" "),s("div",{staticClass:"data-detail"},[s("form",[s("ul",{staticClass:"data-text data-view"},[3!=t.userType?s("li",[s("label",{staticClass:"name"},[t._v("客户名称")]),t._v(" "),s("div",{staticClass:"input-warp"},[s("p",{staticClass:"text"},[t._v(t._s(t.detail.client_name))])])]):t._e(),t._v(" "),3!=t.userType?s("li",[s("label",{staticClass:"name"},[t._v("所属代理")]),t._v(" "),s("div",{staticClass:"input-warp"},[s("p",{staticClass:"text"},[t._v(t._s(t.detail.agency))])])]):t._e(),t._v(" "),s("li",[s("label",{staticClass:"name"},[t._v("项目类型")]),t._v(" "),s("div",{staticClass:"input-warp"},[s("p",{staticClass:"text"},[t._v(t._s(t.detail.project_type))])])]),t._v(" "),s("li",[s("label",{staticClass:"name"},[t._v("人群地域")]),t._v(" "),s("div",{staticClass:"input-warp"},[s("p",{staticClass:"text"},[t._v(t._s(t.detail.region))])])]),t._v(" "),s("li",[s("label",{staticClass:"name"},[t._v("预计线索量")]),t._v(" "),s("div",{staticClass:"input-warp"},[s("p",{staticClass:"text"},[t._v(t._s(t.detail.expect_clue_num))])])]),t._v(" "),s("li",[s("label",{staticClass:"name"},[t._v("预计开始时间")]),t._v(" "),s("div",{staticClass:"input-warp"},[s("p",{staticClass:"text"},[t._v(t._s(t.detail.expect_begin_date))])])]),t._v(" "),s("li",[s("label",{staticClass:"name"},[t._v("详细描述")]),t._v(" "),s("div",{staticClass:"input-warp"},[s("p",{staticClass:"text"},[t._v(t._s(t.detail.desc))])])]),t._v(" "),s("li",[s("label",{staticClass:"name"},[t._v("使用挂机短信")]),t._v(" "),s("div",{staticClass:"input-warp"},[s("p",{staticClass:"text"},[t._v(t._s(1==t.detail.is_hang_up_message?"使用":"不使用"))])])]),t._v(" "),s("li",[s("label",{staticClass:"name"},[t._v("项目创建时间")]),t._v(" "),s("div",{staticClass:"input-warp"},[s("p",{staticClass:"text"},[t._v(t._s(t.detail.created_at))])])]),t._v(" "),s("li",[s("label",{staticClass:"name"},[t._v("项目状态")]),t._v(" "),s("div",{staticClass:"input-warp"},[s("p",{staticClass:"text"},[t._v(t._s(t.detail.project_status))])])]),t._v(" "),-3==t.detail.audit_status?s("li",{staticClass:"both"},[s("label",{staticClass:"name"},[t._v("未通过原因")]),t._v(" "),s("div",{staticClass:"input-warp"},[s("p",{staticClass:"text red"},[t._v(t._s(t.detail.audit_reason))])])]):t._e(),t._v(" "),1==t.detail.status&&-2==t.detail.audit_status?[s("li",{staticClass:"both"},[s("label",{staticClass:"name"},[t._v("资源总量")]),t._v(" "),s("div",{staticClass:"input-warp"},[s("p",{staticClass:"text"},[t._v(t._s(t.detail.clue_num))])])]),t._v(" "),s("li",[s("label",{staticClass:"name"},[t._v("未拨打")]),t._v(" "),s("div",{staticClass:"input-warp"},[s("p",{staticClass:"text"},[t._v(t._s(t.detail.clue_odd_num))])])]),t._v(" "),s("li",[s("label",{staticClass:"name"},[t._v("已拨通")]),t._v(" "),s("div",{staticClass:"input-warp"},[s("p",{staticClass:"text"},[t._v(t._s(t.detail.clue_connect_num))])])]),t._v(" "),s("li",[s("label",{staticClass:"name"},[t._v("拨通率")]),t._v(" "),s("div",{staticClass:"input-warp"},[s("p",{staticClass:"text"},[t._v(t._s(t.detail.clue_valid_percent)+"%")])])]),t._v(" "),s("li",[s("label",{staticClass:"name"},[t._v("通话时长")]),t._v(" "),s("div",{staticClass:"input-warp"},[s("p",{staticClass:"text"},[t._v(t._s(t.detail.call_time))])])]),t._v(" "),s("li",[s("label",{staticClass:"name"},[t._v("剩余时间")]),t._v(" "),s("div",{staticClass:"input-warp"},[s("p",{staticClass:"text"},[t._v(t._s(t.detail.odd_time))])])]),t._v(" "),s("li",[s("label",{staticClass:"name"},[t._v("项目坐席")]),t._v(" "),s("div",{staticClass:"input-warp"},[s("p",{staticClass:"text"},[t._v(t._s(t.detail.project_seat_num))])])]),t._v(" "),s("li",[s("label",{staticClass:"name"},[t._v("挂机短信")]),t._v(" "),s("div",{staticClass:"input-warp"},[s("p",{staticClass:"text"},[t._v(t._s(t.detail.hang_up_message_num))])])])]:t._e(),t._v(" "),2==t.detail.audit_status&&3==t.userType?s("li",[t._m(0)]):t._e()],2)]),t._v(" "),-1==t.detail.audit_status&&1==t.userType?s("div",{staticClass:"btn-warp"},[s("a",{staticClass:"btn blue",attrs:{href:"javascript:void(0);"},on:{click:function(e){t.accept(t.detail.id)}}},[t._v("通过")]),t._v(" "),s("a",{staticClass:"btn red",attrs:{href:"javascript:void(0);"},on:{click:function(e){t.refuse(t.detail.id)}}},[t._v("拒绝")])]):t._e(),t._v(" "),1==t.detail.audit_status&&3==t.userType?s("div",{staticClass:"btn-warp"},[s("button",{staticClass:"btn blue",attrs:{type:"button"},on:{click:function(e){t.assignSeat(t.detail.id,t.detail.name)}}},[t._v("分配坐席")])]):t._e()])]),t._v(" "),s("refuseDialog",{ref:"refuseDialog"}),t._v(" "),s("chooseSeatDialog",{ref:"chooseSeatDialog"})],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-warp"},[s("a",{staticClass:"btn blue",attrs:{href:"client-afresh.html"}},[t._v("重新申请")])])}]}}});
//# sourceMappingURL=21.fc56685337744a80d369.js.map