webpackJsonp([30],{375:function(t,e,s){var a=s(133)(s(679),s(816),null,null,null);t.exports=a.exports},382:function(t,e,s){"use strict";e.a={login:"/user/login",logout:"/user/logout",customer_info:"/customer/allinfo",customer_alarm:"/customer/balancealarm",update_pass:"/user/modifypwd",operate_list:"/operation/list",operate_addagent:"/operate/addagent",operate_getagent:"/operate/getagent",operate_upagent:"/operate/modifyagin",operate_pwdagent:"/operate/modifypwd",operate_expire_seat_list:"/operate/expireseat",operate_active_seat:"/seat/recharge",agent_list:"/operate/aginuserinfo",reset_operate_pass:"/operation/changePwd",create_operate:"/operation/add",get_operate_info:"/operation/modifyinfo",update_operate:"/operation/operationmodifyinfomessage",customer_list:"/agent/list",customer_list_all:"/customer/all",customer_list_by_operate:"/operate/list",customer_type_list:"/operate/usertype",customer_add:"/agent/add",customer_add_by_operate:"/operate/operateadduser",customer_modify:"/agent/modify",customer_detail:"/agent/agininfo",agent_my_info:"/agent/info",agent_modify_myinfo:"/agent/modifyself",customer_detail_by_operate:"/operate/agentinfo",customer_edit:"/agent/modifyinfo",customer_upself:"/customer/modify",customer_check:"/operate/examine",customer_renew_seat:"/customer/renewseatinfo",angent_list_all:"/operate/agent",add_seat:"/operate/seatmodify",recharge:"/operate/recharge",project_status:"/project/status",project_list:"/project/list",project_stop:"/project/pause",project_start:"/project/start",project_detail:"/project/detail",preject_audit:"/project/audit",project_recheck:"/project/againaudit",expense_project:"/operate/chargingproject",expense_project_user:"/operate/charginuser",expense_project_agent:"/operate/chargingagent",expense_seat:"/operate/chargingseat",expense_seat_count:"/operate/chargingseatcount",expense_seat_agent:"/operate/chargingagentseat",expense_balance_in:"/customer/recharge",expense_balance_out:"/customer/consume",customer_expense_project:"/customer/chargingproject",customer_seat:"/customer/chargingseat",customer_seat_count:"/customer/chargingseatcount",customer_my_seat_list:"/customer/seat",project_type_list:"/project/type",project_add:"/project/create",project_call_list:"/seat/outbound",project_call_nodial_list:"/seat/getClueDialNo",project_call_enddial_list:"/seat/getClueDialOk",project_call_modify:"/seat/modify",project_clue_info:"/seat/clueinfo",project_set_sms:"/project/start_gj_sms",project_get_nodial_clues:"/project/getNoDialClues",project_recovery_clues:"/project/recoverClues",seat_list:"/project/seatlist",seat_binding:"/project/binding",seat_status:"/seat/status",seat_tobind:"/project/bindingSeat",call_list:"/teltraffic/list",call_cate:"/teltraffic/category",call_head:"/teltraffic/heads",call_audio:"/teltraffic/proSeatList",call_phone_audio:"/teltraffic/proSeatPhoneList",call_audio_export:"/teltraffic/proSeatList_export",call_audio_phone_export:"/teltraffic/proSeatPhone_export",get_seat_sign:"/callCenter/getSignInData",save_call_uuid:"/callCenter/saveCallUuid",add_call_job:"/callCenter/addJob",doc_list:"/doc/list",doc_upload:"/doc/upload",doc_download:"/doc/download",get_myclient_balance:"/seat/balance",get_tel:"/seat/getseatphone",get_tel_prefix:"/callCenter/getPhonePrefix",filter_product_1:"/filtertag/products",filter_product_2:"/filtertag/product",filter_prefer_1:"/filtertag/preferences",filter_prefer_2:"/filtertag/preference",filter_area:"/filtertag/region",filter_customers:"/filtertag/selectnumber",filter_save:"/filtertag/save",get_login_status:"/user/status",change_price:"/operate/modifyprice",dial_pre:"/seat/changestatus",save_dial_history:"/callCenter/saveTelephoneRecord",no_sms_template_customer:"/sms/no_client_list",sms_record_list:"/sms/record_list",sms_record_export:"/sms/record_list_export",sms_template_list:"/sms/template_list",sms_template_add:"/sms/template_save",sms_template_detail:"/sms/template_find",sms_client_list:"/sms/client_select",sms_client_template_list:"/sms/template_select",sms_send:"/sms/record_save",seat_list_by_project:"/project/getSeatByProject",left_info_list:"/sms/capital_list",left_info_export:"/sms/capital_list_export",clue_attribution:"/clue/getAttribution",clue_get_result:"/clue/getDialResults",clue_get_sub_result:"/clue/getDialSubresults",clue_get_record:"/seat/getPhoneRecord",clue_get_next1:"/seat/getNextClueDialNo",clue_get_next2:"/seat/getNextClueDialOk"}},408:function(t,e,s){var a=s(133)(s(409),s(410),null,null,null);t.exports=a.exports},409:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(49);e.default={data:function(){return{selected:{id:"",name:""},list:[],show:!1}},props:["api","param","id","name","initlist","error","addClass","hideAll","disabled"],watch:{id:function(t,e){this.choose(t)},name:function(t,e){this.choose("",t)}},created:function(){this.init()},mounted:function(){var t=this;a.a.nextTick(function(){document.addEventListener("click",function(){t.show=!1})})},methods:{showSelect:function(){if(this.disabled)return!1;this.show?this.show=!1:this.show=!0},change:function(t){this.selected=t||{id:"",name:"全部"},this.$emit("change",this.selected),this.show=!1},choose:function(t,e){var s=this,a=!1;this.list.find(function(i,r){""!=t&&t==i.id&&(s.selected=i,a=!0),""!=e&&e==i.name&&(s.selected=i,a=!0)}),a||(this.hideAll?this.selected=this.list.length>0?this.list[0]:{id:"",name:""}:this.selected={id:"",name:"全部"})},init:function(t){var e=this;if(this.initlist)this.list=this.initlist,this.choose(this.id,this.name),t&&t();else if(this.api){var s=this.param?this.param:{};this.$ajax({url:this.api,data:s,success:function(s){var a=[],i=s.data;if(i instanceof Array)i.forEach(function(t,e){a.push({id:void 0==t.id?void 0==t.code?e+1:t.code:t.id,name:t.name||t.desc||t.user||t})});else for(var r in i)a.push({id:r,name:i[r]});e.list=a,e.choose(e.id,e.name),t&&t()}})}}}}},410:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-warp"},[s("div",{staticClass:"select-warp",class:[{"select-open":t.show},t.addClass]},[s("p",{staticClass:"all",on:{click:function(e){e.stopPropagation(),t.showSelect(e)}}},[s("span",[t._v(t._s(t.selected.name))])]),t._v(" "),s("div",{staticClass:"select-ul"},[s("div",{staticClass:"scroll-warp scrollBar",staticStyle:{"overflow-y":"auto"}},[s("ul",[t.hideAll?t._e():s("li",{on:{click:function(e){e.stopPropagation(),t.change()}}},[t._v("全部")]),t._v(" "),t._l(t.list,function(e,a){return s("li",{on:{click:function(s){s.stopPropagation(),t.change(e)}}},[t._v(t._s(e.name))])})],2)])])]),t._v(" "),t.error?s("p",{staticClass:"error"},[t._v(t._s(t.error))]):t._e()])},staticRenderFns:[]}},679:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(382),i=s(408),r=s.n(i);e.default={data:function(){return{id:"",name:"",clientApi:a.a.sms_client_list,client:"",content:"",url:"",sign:"",status:"",error_name:"",error_client:"",error_content:"",error_url:"",error_sign:"",error_status:"",loading:!1}},created:function(){var t=this;this.$route.query.id&&(this.id=this.$route.query.id,this.$ajax({url:a.a.sms_template_detail,data:{id:this.id},success:function(e){200==e.code&&(t.client=e.data.client_id,t.name=e.data.name,t.content=e.data.content,t.url=e.data.url,t.sign=e.data.sign,t.status=e.data.status)}}))},computed:{content_view:function(){return this.content.replace(/#url#/,'<a href="'+this.url+'"> t.cn/RK73y </a>')},contentLength:function(){return this.content.replace(/#url#/,"12345678901234").length}},methods:{setStatus:function(t){this.status=t},submit:function(){var t=this;if(!this.name)return this.error_name="请填写模板名称",!1;if(this.error_name="",!this.$refs.clientSelect.selected.id)return this.error_client="请选择客户",!1;if(this.error_client="",!this.content)return this.error_content="请填写短信内容",!1;if(this.error_content="",this.url){if(!/(http|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:\/~\+#]*[\w\-\@?^=%&amp;\/~\+#])?/.test(this.url))return this.error_url="链接格式不正确",!1;this.error_url=""}else this.error_url="";if(!this.sign)return this.error_sign="请填写短信签名",!1;if(this.error_sign="",!this.status)return this.error_status="请选择短信状态",!1;if(this.error_status="",this.contentLength+this.sign.length+2>70)return this.$alert("运营商限制每条短信内容不得超过70个字符,<br/>请缩短短信内容"),!1;var e={name:this.name,client_id:this.$refs.clientSelect.selected.id,type:1,content:this.content,url:this.url,sign:this.sign,status:this.status};this.id&&(e.id=this.id),this.loading=!0,this.$ajax({url:a.a.sms_template_add,data:e,success:function(e){if(t.loading=!1,200==e.code){var s=t;t.$toast(t.id?"编辑成功":"新建成功",function(){s.$router.replace("/project/sms/template")})}else 50001==e.code?t.error_sign=e.message:t.error_status=e.message}})}},components:{mselect:r.a}}},816:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"warp"},[s("div",{staticClass:"main"},[s("div",{staticClass:"title-warp"},[t._v(t._s(t.id?"编辑模板":"新建模板"))]),t._v(" "),s("div",{staticClass:"data-detail"},[s("form",[s("ul",{staticClass:"data-text"},[s("li",[s("label",{staticClass:"name"},[t._v("模板名称")]),t._v(" "),s("div",{staticClass:"input-warp"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"text",attrs:{type:"text"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),t._v(" "),t.error_name?s("p",{staticClass:"tips block error"},[t._v(t._s(t.error_name))]):t._e()])]),t._v(" "),s("li",[s("label",{staticClass:"name"},[t._v("客户名称")]),t._v(" "),s("mselect",{ref:"clientSelect",attrs:{api:t.clientApi,id:t.client,disabled:t.id,error:t.error_client}})],1),t._v(" "),t._m(0),t._v(" "),s("li",[s("label",{staticClass:"name"},[t._v("短信文本")]),t._v(" "),s("div",{staticClass:"input-warp"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}}),t._v(" "),s("p",{staticClass:"tips block"},[t._v("已经输入"+t._s(t.contentLength)+"个字符")]),t._v(" "),t.error_content?s("p",{staticClass:"tips block error"},[t._v(t._s(t.error_content))]):t._e()])]),t._v(" "),s("li",[s("label",{staticClass:"name"},[t._v("短信链接")]),t._v(" "),s("div",{staticClass:"input-warp"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.url,expression:"url"}],staticClass:"text",attrs:{type:"text"},domProps:{value:t.url},on:{input:function(e){e.target.composing||(t.url=e.target.value)}}}),t._v(" "),s("p",{staticClass:"tips block"},[t._v("如有短信链接，务必在短信文本中对应位置加入链接占位符#url#")]),t._v(" "),t.error_url?s("p",{staticClass:"tips block error"},[t._v(t._s(t.error_url))]):t._e()])]),t._v(" "),s("li",[s("label",{staticClass:"name"},[t._v("短信签名")]),t._v(" "),s("div",{staticClass:"input-warp"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.sign,expression:"sign"}],staticClass:"text",attrs:{type:"text"},domProps:{value:t.sign},on:{input:function(e){e.target.composing||(t.sign=e.target.value)}}}),t._v(" "),t.error_sign?s("p",{staticClass:"tips block error"},[t._v(t._s(t.error_sign))]):t._e()])])]),t._v(" "),s("ul",{staticClass:"data-text"},[s("li",{staticClass:"li-radio"},[s("label",{staticClass:"name"},[t._v("模板状态")]),t._v(" "),s("div",{staticClass:"input-warp"},[s("label",{staticClass:"radio-warp radio-inline",class:{"radio-active":1==t.status},on:{click:function(e){t.setStatus(1)}}},[s("i",{staticClass:"icon"}),t._v(" "),s("span",{staticClass:"radioname"},[t._v("审核中")])]),t._v(" "),s("label",{staticClass:"radio-warp radio-inline",class:{"radio-active":2==t.status},on:{click:function(e){t.setStatus(2)}}},[s("i",{staticClass:"icon"}),t._v(" "),s("span",{staticClass:"radioname"},[t._v("使用中")])]),t._v(" "),s("label",{staticClass:"radio-warp radio-inline",class:{"radio-active":3==t.status},on:{click:function(e){t.setStatus(3)}}},[s("i",{staticClass:"icon"}),t._v(" "),s("span",{staticClass:"radioname"},[t._v("已禁用")])]),t._v(" "),t.error_status?s("p",{staticClass:"tips block error"},[t._v(t._s(t.error_status))]):t._e()])]),t._v(" "),s("li",{staticClass:"li-btn"},[s("div",{staticClass:"input-warp"},[t.loading?t._e():s("button",{staticClass:"btn blue",on:{click:t.submit}},[t._v("提交")]),t._v(" "),t.loading?s("button",{staticClass:"btn loading",attrs:{type:"button"}},[s("em",[t._v("...")])]):t._e()])])])]),t._v(" "),s("div",{staticClass:"sms-phone"},[s("div",{staticClass:"inrr"},[s("i",{staticClass:"bg-up"}),t._v(" "),s("i",{staticClass:"bg-down"}),t._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:t.sign,expression:"sign"}]},[t._v("【"+t._s(t.sign)+"】")]),t._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:t.content_view,expression:"content_view"}],domProps:{innerHTML:t._s(t.content_view)}})])])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",[s("label",{staticClass:"name"},[t._v("短信类型")]),t._v(" "),s("div",{staticClass:"input-warp"},[s("p",{staticClass:"text"},[t._v("挂机短信")])])])}]}}});
//# sourceMappingURL=30.b2b25f80f34d4ed3cc1f.js.map