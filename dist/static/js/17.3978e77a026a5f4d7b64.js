webpackJsonp([17],{364:function(t,e,a){var s=a(133)(a(655),a(817),null,null,null);t.exports=s.exports},382:function(t,e,a){"use strict";e.a={login:"/user/login",logout:"/user/logout",customer_info:"/customer/allinfo",customer_alarm:"/customer/balancealarm",update_pass:"/user/modifypwd",operate_list:"/operation/list",operate_addagent:"/operate/addagent",operate_getagent:"/operate/getagent",operate_upagent:"/operate/modifyagin",operate_pwdagent:"/operate/modifypwd",operate_expire_seat_list:"/operate/expireseat",operate_active_seat:"/seat/recharge",agent_list:"/operate/aginuserinfo",reset_operate_pass:"/operation/changePwd",create_operate:"/operation/add",get_operate_info:"/operation/modifyinfo",update_operate:"/operation/operationmodifyinfomessage",customer_list:"/agent/list",customer_list_all:"/customer/all",customer_list_by_operate:"/operate/list",customer_type_list:"/operate/usertype",customer_add:"/agent/add",customer_add_by_operate:"/operate/operateadduser",customer_modify:"/agent/modify",customer_detail:"/agent/agininfo",agent_my_info:"/agent/info",agent_modify_myinfo:"/agent/modifyself",customer_detail_by_operate:"/operate/agentinfo",customer_edit:"/agent/modifyinfo",customer_upself:"/customer/modify",customer_check:"/operate/examine",customer_renew_seat:"/customer/renewseatinfo",angent_list_all:"/operate/agent",add_seat:"/operate/seatmodify",recharge:"/operate/recharge",project_status:"/project/status",project_list:"/project/list",project_stop:"/project/pause",project_start:"/project/start",project_detail:"/project/detail",preject_audit:"/project/audit",project_recheck:"/project/againaudit",expense_project:"/operate/chargingproject",expense_project_user:"/operate/charginuser",expense_project_agent:"/operate/chargingagent",expense_seat:"/operate/chargingseat",expense_seat_count:"/operate/chargingseatcount",expense_seat_agent:"/operate/chargingagentseat",expense_balance_in:"/customer/recharge",expense_balance_out:"/customer/consume",customer_expense_project:"/customer/chargingproject",customer_seat:"/customer/chargingseat",customer_seat_count:"/customer/chargingseatcount",customer_my_seat_list:"/customer/seat",project_type_list:"/project/type",project_add:"/project/create",project_call_list:"/seat/outbound",project_call_nodial_list:"/seat/getClueDialNo",project_call_enddial_list:"/seat/getClueDialOk",project_call_modify:"/seat/modify",project_clue_info:"/seat/clueinfo",project_set_sms:"/project/start_gj_sms",project_get_nodial_clues:"/project/getNoDialClues",project_recovery_clues:"/project/recoverClues",seat_list:"/project/seatlist",seat_binding:"/project/binding",seat_status:"/seat/status",seat_tobind:"/project/bindingSeat",call_list:"/teltraffic/list",call_cate:"/teltraffic/category",call_head:"/teltraffic/heads",call_audio:"/teltraffic/proSeatList",call_phone_audio:"/teltraffic/proSeatPhoneList",call_audio_export:"/teltraffic/proSeatList_export",call_audio_phone_export:"/teltraffic/proSeatPhone_export",get_seat_sign:"/callCenter/getSignInData",save_call_uuid:"/callCenter/saveCallUuid",add_call_job:"/callCenter/addJob",doc_list:"/doc/list",doc_upload:"/doc/upload",doc_download:"/doc/download",get_myclient_balance:"/seat/balance",get_tel:"/seat/getseatphone",get_tel_prefix:"/callCenter/getPhonePrefix",filter_product_1:"/filtertag/products",filter_product_2:"/filtertag/product",filter_prefer_1:"/filtertag/preferences",filter_prefer_2:"/filtertag/preference",filter_area:"/filtertag/region",filter_customers:"/filtertag/selectnumber",filter_save:"/filtertag/save",get_login_status:"/user/status",change_price:"/operate/modifyprice",dial_pre:"/seat/changestatus",save_dial_history:"/callCenter/saveTelephoneRecord",no_sms_template_customer:"/sms/no_client_list",sms_record_list:"/sms/record_list",sms_record_export:"/sms/record_list_export",sms_template_list:"/sms/template_list",sms_template_add:"/sms/template_save",sms_template_detail:"/sms/template_find",sms_client_list:"/sms/client_select",sms_client_template_list:"/sms/template_select",sms_send:"/sms/record_save",seat_list_by_project:"/project/getSeatByProject",left_info_list:"/sms/capital_list",left_info_export:"/sms/capital_list_export",clue_attribution:"/clue/getAttribution",clue_get_result:"/clue/getDialResults",clue_get_sub_result:"/clue/getDialSubresults",clue_get_record:"/seat/getPhoneRecord",clue_get_next1:"/seat/getNextClueDialNo",clue_get_next2:"/seat/getNextClueDialOk"}},383:function(t,e){var a=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=a)},384:function(t,e,a){t.exports=!a(389)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},385:function(t,e,a){var s=a(395),i=a(402);t.exports=a(384)?function(t,e,a){return s.f(t,e,i(1,a))}:function(t,e,a){return t[e]=a,t}},386:function(t,e){var a=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=a)},388:function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},389:function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},390:function(t,e,a){var s=a(388);t.exports=function(t){if(!s(t))throw TypeError(t+" is not an object!");return t}},391:function(t,e){var a={}.hasOwnProperty;t.exports=function(t,e){return a.call(t,e)}},392:function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},393:function(t,e){var a=Math.ceil,s=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?s:a)(t)}},394:function(t,e,a){var s=a(398),i=a(392);t.exports=function(t){return s(i(t))}},395:function(t,e,a){var s=a(390),i=a(414),r=a(418),n=Object.defineProperty;e.f=a(384)?Object.defineProperty:function(t,e,a){if(s(t),e=r(e,!0),s(a),i)try{return n(t,e,a)}catch(t){}if("get"in a||"set"in a)throw TypeError("Accessors not supported!");return"value"in a&&(t[e]=a.value),t}},396:function(t,e,a){var s=a(403)("keys"),i=a(404);t.exports=function(t){return s[t]||(s[t]=i(t))}},398:function(t,e,a){var s=a(399);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==s(t)?t.split(""):Object(t)}},399:function(t,e){var a={}.toString;t.exports=function(t){return a.call(t).slice(8,-1)}},400:function(t,e,a){var s=a(388),i=a(383).document,r=s(i)&&s(i.createElement);t.exports=function(t){return r?i.createElement(t):{}}},401:function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},402:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},403:function(t,e,a){var s=a(383),i=s["__core-js_shared__"]||(s["__core-js_shared__"]={});t.exports=function(t){return i[t]||(i[t]={})}},404:function(t,e){var a=0,s=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++a+s).toString(36))}},405:function(t,e,a){var s=a(383),i=a(386),r=a(413),n=a(385),o=function(t,e,a){var l,c,u,_=t&o.F,d=t&o.G,p=t&o.S,f=t&o.P,m=t&o.B,v=t&o.W,h=d?i:i[e]||(i[e]={}),g=h.prototype,y=d?s:p?s[e]:(s[e]||{}).prototype;d&&(a=e);for(l in a)(c=!_&&y&&void 0!==y[l])&&l in h||(u=c?y[l]:a[l],h[l]=d&&"function"!=typeof y[l]?a[l]:m&&c?r(u,s):v&&y[l]==u?function(t){var e=function(e,a,s){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,a)}return new t(e,a,s)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(u):f&&"function"==typeof u?r(Function.call,u):u,f&&((h.virtual||(h.virtual={}))[l]=u,t&o.R&&g&&!g[l]&&n(g,l,u)))};o.F=1,o.G=2,o.S=4,o.P=8,o.B=16,o.W=32,o.U=64,o.R=128,t.exports=o},406:function(t,e,a){var s=a(415),i=a(401);t.exports=Object.keys||function(t){return s(t,i)}},407:function(t,e,a){var s=a(392);t.exports=function(t){return Object(s(t))}},408:function(t,e,a){var s=a(133)(a(409),a(410),null,null,null);t.exports=s.exports},409:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(49);e.default={data:function(){return{selected:{id:"",name:""},list:[],show:!1}},props:["api","param","id","name","initlist","error","addClass","hideAll","disabled"],watch:{id:function(t,e){this.choose(t)},name:function(t,e){this.choose("",t)}},created:function(){this.init()},mounted:function(){var t=this;s.a.nextTick(function(){document.addEventListener("click",function(){t.show=!1})})},methods:{showSelect:function(){if(this.disabled)return!1;this.show?this.show=!1:this.show=!0},change:function(t){this.selected=t||{id:"",name:"全部"},this.$emit("change",this.selected),this.show=!1},choose:function(t,e){var a=this,s=!1;this.list.find(function(i,r){""!=t&&t==i.id&&(a.selected=i,s=!0),""!=e&&e==i.name&&(a.selected=i,s=!0)}),s||(this.hideAll?this.selected=this.list.length>0?this.list[0]:{id:"",name:""}:this.selected={id:"",name:"全部"})},init:function(t){var e=this;if(this.initlist)this.list=this.initlist,this.choose(this.id,this.name),t&&t();else if(this.api){var a=this.param?this.param:{};this.$ajax({url:this.api,data:a,success:function(a){var s=[],i=a.data;if(i instanceof Array)i.forEach(function(t,e){s.push({id:void 0==t.id?void 0==t.code?e+1:t.code:t.id,name:t.name||t.desc||t.user||t})});else for(var r in i)s.push({id:r,name:i[r]});e.list=s,e.choose(e.id,e.name),t&&t()}})}}}}},410:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-warp"},[a("div",{staticClass:"select-warp",class:[{"select-open":t.show},t.addClass]},[a("p",{staticClass:"all",on:{click:function(e){e.stopPropagation(),t.showSelect(e)}}},[a("span",[t._v(t._s(t.selected.name))])]),t._v(" "),a("div",{staticClass:"select-ul"},[a("div",{staticClass:"scroll-warp scrollBar",staticStyle:{"overflow-y":"auto"}},[a("ul",[t.hideAll?t._e():a("li",{on:{click:function(e){e.stopPropagation(),t.change()}}},[t._v("全部")]),t._v(" "),t._l(t.list,function(e,s){return a("li",{on:{click:function(a){a.stopPropagation(),t.change(e)}}},[t._v(t._s(e.name))])})],2)])])]),t._v(" "),t.error?a("p",{staticClass:"error"},[t._v(t._s(t.error))]):t._e()])},staticRenderFns:[]}},411:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},412:function(t,e,a){var s=a(394),i=a(417),r=a(416);t.exports=function(t){return function(e,a,n){var o,l=s(e),c=i(l.length),u=r(n,c);if(t&&a!=a){for(;c>u;)if((o=l[u++])!=o)return!0}else for(;c>u;u++)if((t||u in l)&&l[u]===a)return t||u||0;return!t&&-1}}},413:function(t,e,a){var s=a(411);t.exports=function(t,e,a){if(s(t),void 0===e)return t;switch(a){case 1:return function(a){return t.call(e,a)};case 2:return function(a,s){return t.call(e,a,s)};case 3:return function(a,s,i){return t.call(e,a,s,i)}}return function(){return t.apply(e,arguments)}}},414:function(t,e,a){t.exports=!a(384)&&!a(389)(function(){return 7!=Object.defineProperty(a(400)("div"),"a",{get:function(){return 7}}).a})},415:function(t,e,a){var s=a(391),i=a(394),r=a(412)(!1),n=a(396)("IE_PROTO");t.exports=function(t,e){var a,o=i(t),l=0,c=[];for(a in o)a!=n&&s(o,a)&&c.push(a);for(;e.length>l;)s(o,a=e[l++])&&(~r(c,a)||c.push(a));return c}},416:function(t,e,a){var s=a(393),i=Math.max,r=Math.min;t.exports=function(t,e){return t=s(t),t<0?i(t+e,0):r(t,e)}},417:function(t,e,a){var s=a(393),i=Math.min;t.exports=function(t){return t>0?i(s(t),9007199254740991):0}},418:function(t,e,a){var s=a(388);t.exports=function(t,e){if(!s(t))return t;var a,i;if(e&&"function"==typeof(a=t.toString)&&!s(i=a.call(t)))return i;if("function"==typeof(a=t.valueOf)&&!s(i=a.call(t)))return i;if(!e&&"function"==typeof(a=t.toString)&&!s(i=a.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},419:function(t,e,a){t.exports={default:a(420),__esModule:!0}},420:function(t,e,a){a(424),t.exports=a(386).Object.assign},421:function(t,e,a){"use strict";var s=a(406),i=a(422),r=a(423),n=a(407),o=a(398),l=Object.assign;t.exports=!l||a(389)(function(){var t={},e={},a=Symbol(),s="abcdefghijklmnopqrst";return t[a]=7,s.split("").forEach(function(t){e[t]=t}),7!=l({},t)[a]||Object.keys(l({},e)).join("")!=s})?function(t,e){for(var a=n(t),l=arguments.length,c=1,u=i.f,_=r.f;l>c;)for(var d,p=o(arguments[c++]),f=u?s(p).concat(u(p)):s(p),m=f.length,v=0;m>v;)_.call(p,d=f[v++])&&(a[d]=p[d]);return a}:l},422:function(t,e){e.f=Object.getOwnPropertySymbols},423:function(t,e){e.f={}.propertyIsEnumerable},424:function(t,e,a){var s=a(405);s(s.S+s.F,"Object",{assign:a(421)})},582:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(382),i=a(408),r=a.n(i),n=a(49);e.default={data:function(){return{style:"none",id:"",list:[],selectShow:!1,selected:{id:"",name:"",preview_content:""}}},methods:{close:function(){this.style="none",this.$store.commit("HIDE_LAYER")},showSelect:function(){this.selectShow=!0},change:function(t){this.selected=t},sure:function(){var t=this,e=sessionStorage.getItem("client_id");this.$ajax({url:s.a.sms_send,data:{clue_id:this.id,template_id:this.selected.id,client_id:e},success:function(e){t.close(),200==e.code?t.$toast("短信发送成功"):t.$toast(e.message)}})}},created:function(){this.$on("show",function(t){var e=this;this.id=t;var a=sessionStorage.getItem("client_id");this.$ajax({url:s.a.sms_client_template_list,data:{client_id:a},success:function(t){200==t.code?(e.list=t.data,e.list.length>0?(e.selected=t.data[0],e.style="block",e.$store.commit("SHOW_LAYER")):e.$toast("未建立短信模板，无法发送短信")):e.$toast(t.message)}})})},components:{mselect:r.a},mounted:function(){var t=this;n.a.nextTick(function(){document.addEventListener("click",function(){t.selectShow=!1})})}}},585:function(t,e,a){var s=a(133)(a(582),a(587),null,null,null);t.exports=s.exports},587:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dialog",staticStyle:{"margin-left":"-259px","margin-top":"-300px"},style:{display:t.style}},[a("a",{staticClass:"icon dialog-close",attrs:{href:"javascript:void(0);",title:"关闭"},on:{click:t.close}}),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"dialog-body"},[a("ul",{staticClass:"query-warp"},[a("li",[a("label",[t._v("短信模板")]),t._v(" "),a("div",{staticClass:"input-warp"},[a("div",{staticClass:"select-warp dial-select-sms",class:{"select-open":t.selectShow}},[a("p",{staticClass:"all",on:{click:function(e){e.stopPropagation(),t.showSelect(e)}}},[a("span",[t._v(t._s(t.selected.name))])]),t._v(" "),a("div",{staticClass:"select-ul"},[a("div",{staticClass:"scroll-warp scrollBar"},[a("ul",t._l(t.list,function(e){return a("li",{on:{click:function(a){t.change(e)}}},[t._v(t._s(e.name))])}))])])])])])]),t._v(" "),a("div",{staticClass:"sroll-warp scrollBar",staticStyle:{"overflow-y":"auto",height:"350px"}},[a("div",{staticClass:"sms-phone"},[a("div",{staticClass:"inrr"},[a("i",{staticClass:"bg-up"}),t._v(" "),a("i",{staticClass:"bg-down"}),t._v(" "),a("p",[t._v(t._s(t.selected.preview_content))])])])])]),t._v(" "),a("div",{staticClass:"dialog-footer"},[a("button",{staticClass:"btn blue",attrs:{type:"button"},on:{click:t.sure}},[t._v("发送")]),t._v(" "),a("button",{staticClass:"btn",attrs:{type:"button"},on:{click:t.close}},[t._v("取消")])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dialog-header"},[a("h4",[t._v("发短信")])])}]}},595:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(382);e.default={data:function(){return{id:"",list:[],playNow:-1}},created:function(){this.init()},watch:{$route:function(){this.init()}},filters:{timeFormat:function(t){var e=0,a=0,s=0;return t>3600&&(e=Math.floor(t/3600)),t>60&&(a=Math.floor((t-60*e*60)/60)),s=t-60*e*60-60*a,(e?e+"时":"")+(a||e?a+"分":"")+s+"秒"}},methods:{init:function(){var t=this;this.id=this.$route.query.id,this.$ajax({url:s.a.clue_get_record,data:{clue_id:this.id},success:function(e){200==e.code?t.list=e.data:t.list=[]}})},playAudio:function(t,e,a){var s=document.querySelector("#audio"),i=document.querySelectorAll(".btn-audio"),r=a.currentTarget.querySelectorAll("span"),n=r[1].innerText;s.style.display="inline-block";for(var o=0;o<i.length;o++){var l=i[o],c=l.querySelectorAll("span");c[0].querySelector("i").className="icon play",c[1].innerHTML="播放",l.removeAttribute("id")}a.currentTarget.id="currentplay","暂停"==n?s.pause():(s.getAttribute("src")!=t&&(s.src=t,s.load()),s.play())},end:function(){for(var t=document.querySelectorAll(".btn-audio"),e=0;e<t.length;e++){var a=t[e],s=a.querySelectorAll("span");s[0].querySelector("i").className="icon play",s[1].innerHTML="播放"}this.playNow=-1},pause:function(){var t=document.querySelectorAll("#currentplay span");t[0].querySelector("i").className="icon play",t[1].innerHTML="继续播放"},play:function(){var t=document.querySelectorAll("#currentplay span");t[0].querySelector("i").className="icon pause",t[1].innerHTML="暂停"}}}},608:function(t,e,a){var s=a(133)(a(595),a(613),null,null,null);t.exports=s.exports},613:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{position:"relative"}},[t.list.length>0?a("table",{attrs:{cellspacing:"0",cellpadding:"0"}},[a("tbody",[t._m(0),t._v(" "),t._l(t.list,function(e,s){return a("tr",{class:{tr2:s%2==1}},[a("td",[t._v(t._s(e.updated_at))]),t._v(" "),a("td",[t._v(t._s(e.telephone_crypt))]),t._v(" "),a("td",[t._v(t._s(t._f("timeFormat")(e.call_time)))]),t._v(" "),a("td",{staticClass:"tl"},[t._v(t._s(e.remarks))]),t._v(" "),a("td",{staticClass:"tl"},[t._v("【"+t._s(e.dial_result_first)+"】"+t._s(e.dial_result_second))]),t._v(" "),a("td",[e.sound_url?a("a",{staticClass:"btn-audio",attrs:{href:"javascript:void(0);"},on:{click:function(a){t.playAudio(e.sound_url,s,a)}}},[t._m(1,!0),t._v(" "),a("span",{staticClass:"audio-txt"},[t._v("播放")])]):t._e(),t._v(" "),e.download_url?a("a",{attrs:{href:e.download_url}},[t._m(2,!0),t._v("下载")]):t._e()])])})],2)]):t._e(),t._v(" "),a("audio",{staticClass:"audio",staticStyle:{position:"absolute",top:"-45px",right:"0px","z-index":"100000",width:"400px",display:"none"},attrs:{controls:"true",id:"audio"},on:{play:t.play,pause:t.pause,ended:t.end}})])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v("拨打时间")]),t._v(" "),a("th",[t._v("拨打资源")]),t._v(" "),a("th",[t._v("通话时长")]),t._v(" "),a("th",{staticClass:"tl"},[t._v("备注")]),t._v(" "),a("th",{staticClass:"tl"},[t._v("拨打结果")]),t._v(" "),a("th",[t._v("通话录音")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"notice"},[a("i",{staticClass:"icon play"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"notice"},[a("i",{staticClass:"icon download"})])}]}},655:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(419),i=a.n(s),r=a(382),n=a(408),o=a.n(n),l=a(608),c=a.n(l),u=a(585),_=a.n(u);e.default={data:function(){return{clue_id:"",user_id:localStorage.getItem("user").id,render:{projectId:"",projectName:"",tel:"",city:"",call:"",sex:"",call_num:"",smsShow:0},api:{getResult1:r.a.clue_get_result,getResult2:r.a.clue_get_sub_result},variable:{param:{},showsms:!1,complete:!1,desc:"",result_error:"",desc_error:"",call:"",sex:""},global:{history_id:""},search:{city:"",startTime:"",endTime:"",sex:"",result1:"",result2:"",status:""},jump_self:!1}},computed:{dialing:function(){return this.$store.state.dialing},tel_pre:function(){return this.$store.state.tel_pre},seat_info:function(){return this.$store.state.callInfo}},watch:{dialing:function(t,e){1==t&&(this.variable.showsms=!0)},$route:function(){this.init()}},mounted:function(){this.init(),window.onbeforeunload=function(){return"关闭或刷新页面"}},beforeRouteLeave:function(t,e,a){if(e.path==t.path||this.jump_self)window.mycomm_agent.logout(),window.onbeforeunload="",a();else{confirm("是否要离开这个页面")&&(window.mycomm_agent.logout(),window.onbeforeunload="",a())}},methods:{sms:function(){var t=this.clue_id;this.$refs.smsDialog.$emit("show",t)},drop:function(){window.mycomm_agent.drop()},linkResult:function(t){var e=this;this.variable.param={pid:t.id},this.$nextTick(function(){e.$refs.result2Select.init(),e.$refs.result2Select.selected={id:"",name:"全部"}})},chooseSex:function(t){this.variable.sex=t},save:function(t){var e=this,a=this.$refs.result1Select.selected.id,s=this.$refs.result2Select.selected.id;return a&&s?this.variable.desc.length>100?(this.variable.desc_error="备注不能超过100个字符",!1):(this.variable.desc_error="",void this.$ajax({url:r.a.project_call_modify,data:{id:this.clue_id,clue_status:1,remarks:this.variable.desc,sound_code:this.global.history_id,call:this.variable.call,gender:this.variable.sex,dial_result_first:a,dial_result_second:s},success:function(a){200==a.code?t&&t():e.$toast(a.message)}})):(this.variable.result_error="拨打结果必须全部选择",!1)},saveAndExit:function(t){var e=this;if(t.currentTarget.className.indexOf("disabled")>=0)return!1;this.save(function(){e.$toast("操作成功",function(){e.jump_self=!0,window.history.back()})})},saveAddNext:function(t){var e=this,a=this;if(t.currentTarget.className.indexOf("disabled")>=0)return!1;this.save(function(){a.$toast("操作成功",function(){var t=r.a.clue_get_next1,s={project_id:a.render.projectId,city:a.search_city,created_at_start:a.startTime,created_at_end:a.endTime,clue_id:a.clue_id};a.search.status&&(t=r.a.clue_get_next2,s={project_id:a.render.projectId,city:a.search_city,gender:a.search.sex,dial_at_start:a.startTime,dial_at_end:a.endTime,clue_id:a.clue_id,dial_result_first:e.search.result1,dial_result_second:e.search.result2}),e.$ajax({url:t,data:s,success:function(t){if(200==t.code)if(t.data){var s=i()({},a.$route.query,{id:t.data.id,tel:t.data.telephone_crypt,city:t.data.city,call:t.data.call});e.jump_self=!0,e.$router.replace({name:e.$route.name,query:s})}else e.jump_self=!0,e.$toast("已经是最后一条了",function(){window.history.back()});else e.$toast(t.message)}})})})},init:function(){var t=this;this.clue_id=this.$route.query.id,this.render={projectId:this.$route.query.project_id,projectName:this.$route.query.projectName,tel:this.$route.query.tel,city:this.$route.query.city,call:this.$route.query.call,sex:this.$route.query.sex,call_num:this.$route.query.call_num,smsShow:this.$route.query.sms},this.variable.call=this.render.call,this.variable.sex=this.render.sex,this.search={city:this.$route.query.search_city,startTime:this.$route.query.startTime,endTime:this.$route.query.endTime,sex:this.$route.query.search_sex,result1:this.$route.query.search_result1,result2:this.$route.query.search_result2,status:this.$route.query.status},this.$refs.result1Select.selected={id:"",name:"全部"},this.$refs.result2Select.selected={id:"",name:"全部"},this.variable.desc="",this.variable.desc_error="",this.variable.result_error="";var e=this,a="";window.mycomm_agent.wrap_up(0),window.mycomm_agent.on_dial_f=function(t){e.$toast(t.params.err_des),window.mycomm_agent.logout()},window.mycomm_agent.on_login_f=function(t){var a="服务暂不可用，请联系管理员";switch(t.params.err_num){case 404:a="IP电话/软电话/分机没有注册，请根据IP电话机内置说明书进行配置，如有疑问请联系管理员";break;case 409:a="该分机已经被其他坐席使用，请联系管理员";break;case 503:a="服务暂不可用，请联系管理员";break;default:a="服务暂不可用，请联系管理员"}e.$toast(a)},window.mycomm_agent.on_drop_s=function(t){e.variable.complete=!0},window.mycomm_agent.on_agent_ext_hangup=function(t){e.$store.commit("CHANGE_DIAL_STATUS",!1),e.variable.complete=!0,window.mycomm_agent.logout(),e.$ajax({url:r.a.add_call_job,data:{call_uuid:a}})},window.mycomm_agent.on_agent_dial_start=function(t){a=t.params.channel_uuid,e.$store.commit("CHANGE_DIAL_STATUS",!0),e.$ajax({url:r.a.save_call_uuid,data:{call_uuid:a,id:e.global.history_id}})},this.$ajax({url:r.a.get_myclient_balance,data:{seat_id:e.user_id},success:function(a){200==a.code?a.data.balance<=0?e.$toast("您的账号已经没有费用，请联系管理员"):a.data.valid?t.$ajax({url:r.a.get_tel,data:{id:e.clue_id},success:function(a){var s=t.seat_info,i=a.data.telephone;t.tel_pre&&(i=t.tel_pre+i),window.mycomm_agent.on_login_s=function(t){window.mycomm_agent.dial(i,"geo","great"),setInterval(function(){e.$ajax({url:r.a.get_myclient_balance})},3e4)},e.$ajax({url:r.a.save_dial_history,data:{phone:a.data.telephone,project_id:e.render.projectId,clue_id:e.clue_id},success:function(t){200==t.code&&(e.global.history_id=t.data.id,window.mycomm_agent.login(s.cti_server+":"+s.cti_port,s.agent_id.toString(),s.password,s.queue,s.is_leader,s.org_id,s.agent_name,s.work_id.toString(),s.agent_type))}})}}):e.$toast("坐席已失效,暂不能拨打"):e.$toast("获取坐席账户状态失败,暂不能拨打")}})}},components:{mselect:o.a,clueHistory:c.a,smsDialog:_.a}}},817:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"warp"},[a("div",{staticClass:"main"},[a("div",{staticClass:"title-warp"},[t._v(t._s(t.render.projectName)+"拨打详情")]),t._v(" "),a("div",{staticClass:"data-detail"},[a("form",[a("ul",{staticClass:"data-text seat-text"},[a("li",{staticClass:"li-fl"},[a("div",{staticClass:"fl-in"},[a("label",{staticClass:"name"},[t._v("拨打资源")]),t._v(" "),a("div",{staticClass:"input-warp"},[a("p",{staticClass:"text"},[t._v(t._s(t.render.tel))])])]),t._v(" "),t.render.city?a("div",{staticClass:"fl-in"},[a("label",{staticClass:"name"},[t._v("归属地")]),t._v(" "),a("div",{staticClass:"input-warp"},[a("p",{staticClass:"text"},[t._v(t._s(t.render.city))])])]):t._e(),t._v(" "),t.dialing?a("div",{staticClass:"fl-in"},[a("button",{staticClass:"btn red",attrs:{type:"button"},on:{click:function(e){t.drop()}}},[t._m(0)])]):t._e(),t._v(" "),t.variable.showsms&&1==t.render.smsShow?a("div",{staticClass:"fl-in"},[a("a",{staticClass:"btn-sms",attrs:{href:"javascript:void(0);"},on:{click:t.sms}},[t._m(1)])]):t._e()]),t._v(" "),a("li",{staticClass:"li-sex"},[t._m(2),t._v(" "),a("div",{staticClass:"input-warp"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.variable.call,expression:"variable.call"}],staticClass:"text",attrs:{type:"text"},domProps:{value:t.variable.call},on:{input:function(e){e.target.composing||(t.variable.call=e.target.value)}}}),t._v(" "),a("label",{staticClass:"radio-warp",class:{"radio-active":"男"==t.variable.sex},attrs:{for:"male"},on:{click:function(e){t.chooseSex("男")}}},[a("input",{staticClass:"radio",attrs:{type:"radio",name:"sendMode",id:"male",value:"male"}}),t._v(" "),a("i",{staticClass:"icon"}),t._v(" "),a("span",{staticClass:"radioname"},[t._v("先生")])]),t._v(" "),a("label",{staticClass:"radio-warp",class:{"radio-active":"女"==t.variable.sex},attrs:{for:"female"},on:{click:function(e){t.chooseSex("女")}}},[a("input",{staticClass:"radio",attrs:{type:"radio",name:"sendMode",id:"female",value:"female"}}),t._v(" "),a("i",{staticClass:"icon"}),t._v(" "),a("span",{staticClass:"radioname"},[t._v("女士")])])])]),t._v(" "),a("li",{staticClass:"li-fl"},[a("label",{staticClass:"name"},[t._v("拨打结果")]),t._v(" "),a("mselect",{ref:"result1Select",staticStyle:{"padding-right":"10px"},attrs:{api:t.api.getResult1},on:{change:t.linkResult}}),t._v(" "),a("mselect",{ref:"result2Select",attrs:{api:t.api.getResult2,param:t.variable.param}}),t._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:t.variable.result_error,expression:"variable.result_error"}],staticClass:"error",staticStyle:{"padding-left":"75px"}},[t._v(t._s(t.variable.result_error))])],1),t._v(" "),a("li",[t._m(3),t._v(" "),a("div",{staticClass:"input-warp"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.variable.desc,expression:"variable.desc"}],domProps:{value:t.variable.desc},on:{input:function(e){e.target.composing||(t.variable.desc=e.target.value)}}}),t._v(" "),t.variable.desc_error?a("p",{staticClass:"error"},[t._v(t._s(t.variable.desc_error))]):t._e()])]),t._v(" "),a("li",{staticClass:"li-btn"},[a("div",{staticClass:"input-warp input-fl"},[a("button",{staticClass:"btn",class:{disabled:!t.variable.complete},attrs:{type:"button"},on:{click:t.saveAndExit}},[t._v("保存并关闭")]),t._v(" "),a("button",{staticClass:"btn",class:{disabled:!t.variable.complete},attrs:{type:"button"},on:{click:t.saveAddNext}},[t._v("保存并拨打下一个")])])])])])]),t._v(" "),t.render.call_num?a("div",{staticClass:"data-warp"},[a("div",{staticClass:"data-table"},[a("div",{staticClass:"data-export"},[a("ul",[a("li",[a("span",{staticClass:"t"},[t._v("已拨打次数")]),t._v(" "),a("span",{staticClass:"num"},[t._v(t._s(t.render.call_num))])]),t._v(" "),t.render.call||t.render.sex?a("li",[a("span",{staticClass:"t"},[t._v("称呼")]),t._v(" "),a("span",{staticClass:"num"},[t._v(t._s(t.render.call)+t._s("男"==t.render.sex?"先生":"")+t._s("女"==t.render.sex?"女士":""))])]):t._e()])]),t._v(" "),a("clueHistory")],1)]):t._e()]),t._v(" "),a("smsDialog",{ref:"smsDialog"})],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("i",{staticClass:"icon hangup"}),t._v("挂断")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("i",{staticClass:"icon sms"}),t._v("发短信")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"name"},[a("em",[t._v("（选填）")]),t._v("称呼")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"name"},[a("em",[t._v("（选填）")]),t._v("备注说明")])}]}}});
//# sourceMappingURL=17.3978e77a026a5f4d7b64.js.map